/*
 * tables.c
 *
 *  Created on: Jul 29, 2015
 *      Author: austen
 */
#include <stdint.h>
#include "tables.h"
const float soundFreqTable[] = {
		27.5       ,    29.13523483,    30.8677063 ,    32.70319748,
        34.64782715,    36.70809555,    38.89087296,    41.20344543,
        43.65353012,    46.24930191,    48.9994278 ,    51.91308594,
        55.        ,    58.27046967,    61.7354126 ,    65.40639496,
        69.2956543 ,    73.4161911 ,    77.78174591,    82.40689087,
        87.30706024,    92.49860382,    97.99885559,   103.82617188,
       110.        ,   116.54093933,   123.4708252 ,   130.81278992,
       138.59130859,   146.8323822 ,   155.56349182,   164.81378174,
       174.61412048,   184.99720764,   195.99771118,   207.65234375,
       220.        ,   233.08187866,   246.94165039,   261.62557983,
       277.18261719,   293.6647644 ,   311.12698364,   329.62756348,
       349.22824097,   369.99441528,   391.99542236,   415.3046875 ,
       440.        ,   466.16375732,   493.88330078,   523.25115967,
       554.36523438,   587.32952881,   622.25396729,   659.25512695,
       698.45648193,   739.98883057,   783.99084473,   830.609375  ,
       880.        ,   932.32751465,   987.76660156,  1046.50231934,
      1108.73046875,  1174.65905762,  1244.50793457,  1318.51025391,
      1396.91296387,  1479.97766113,  1567.98168945,  1661.21875   ,
      1760.        ,  1864.6550293 ,  1975.53320312,  2093.00463867,
      2217.4609375 ,  2349.31811523,  2489.01586914,  2637.02050781,
      2793.82592773,  2959.95532227,  3135.96337891,  3322.4375    ,
      3520.        ,  3729.31005859,  3951.06640625,  4186.00927734,
      4434.921875  ,  4698.63623047,  4978.03173828,  5274.04101562,
      5587.65185547,  5919.91064453,  6271.92675781,  6644.875     ,
      7040. };

const float lfoFreqTable[] = {
		0.3125    ,   0.33108222,   0.3507694 ,   0.37162721,
        0.39372534,   0.41713744,   0.44194174,   0.46822095,
        0.49606282,   0.52556026,   0.55681169,   0.58992147,
        0.625     ,   0.66216445,   0.7015388 ,   0.74325442,
        0.78745067,   0.83427489,   0.88388348,   0.9364419 ,
        0.99212563,   1.05112052,   1.11362338,   1.17984295,
        1.25      ,   1.3243289 ,   1.4030776 ,   1.48650885,
        1.57490134,   1.66854978,   1.76776695,   1.8728838 ,
        1.98425126,   2.10224104,   2.22724676,   2.3596859 ,
        2.5       ,   2.6486578 ,   2.8061552 ,   2.97301769,
        3.14980268,   3.33709955,   3.53553391,   3.74576759,
        3.96850252,   4.20448208,   4.45449352,   4.7193718 ,
        5.        ,   5.2973156 ,   5.61231041,   5.94603539,
        6.29960537,   6.6741991 ,   7.07106781,   7.49153519,
        7.93700504,   8.40896416,   8.90898705,   9.43874359,
       10.        ,  10.5946312 ,  11.22462082,  11.89207077,
       12.59921074,  13.34839821,  14.14213562,  14.98307037,
       15.87401009,  16.81792831,  17.81797409,  18.87748718,
       20.        ,  21.18926239,  22.44924164,  23.78414154,
       25.19842148,  26.69679642,  28.28427124,  29.96614075,
       31.74802017,  33.63585663,  35.63594818,  37.75497437,
       40.        ,  42.37852478,  44.89848328,  47.56828308,
       50.39684296,  53.39359283,  56.56854248,  59.93228149,
       63.49604034,  67.27171326,  71.27189636,  75.50994873,  80.};

const float freqStepTable[] = {
	0.0625    ,   0.06621645,   0.07015388,   0.07432544,
	0.07874507,   0.08342749,   0.08838835,   0.09364419,
	0.09921256,   0.10511205,   0.11136234,   0.11798429,
	0.125     ,   0.13243289,   0.14030775,   0.14865088,
	0.15749013,   0.16685498,   0.17677669,   0.18728839,
	0.19842513,   0.21022411,   0.22272468,   0.23596857,
	0.25      ,   0.26486579,   0.28061551,   0.29730177,
	0.31498027,   0.33370996,   0.35355338,   0.37457678,
	0.39685026,   0.42044821,   0.44544935,   0.47193715,
	0.5       ,   0.52973157,   0.56123102,   0.59460354,
	0.62996054,   0.66741991,   0.70710677,   0.74915355,
	0.79370052,   0.84089643,   0.8908987 ,   0.9438743 ,
	1.        ,   1.05946314,   1.12246203,   1.18920708,
	1.25992107,   1.33483982,   1.41421354,   1.49830711,
	1.58740103,   1.68179286,   1.78179741,   1.8877486 ,
	2.        ,   2.11892629,   2.24492407,   2.37841415,
	2.51984215,   2.66967964,   2.82842708,   2.99661422,
	3.17480206,   3.36358571,   3.56359482,   3.7754972 ,
	4.        ,   4.23785257,   4.48984814,   4.75682831,
	5.0396843 ,   5.33935928,   5.65685415,   5.99322844,
	6.34960413,   6.72717142,   7.12718964,   7.5509944 ,
	8.        ,   8.47570515,   8.97969627,   9.51365662,
	10.07936859,  10.67871857,  11.31370831,  11.98645687,
	12.69920826,  13.45434284,  14.25437927,  15.10198879,  16.0};

const float freqStepSlopeTable[] = {
		0.00371645,  0.00393743,  0.00417157,  0.00441962,  0.00468242,
        0.00496086,  0.00525585,  0.00556837,  0.00589949,  0.00625028,
        0.00662195,  0.00701571,  0.00743289,  0.00787486,  0.00834313,
        0.00883925,  0.00936484,  0.00992171,  0.0105117 ,  0.01113674,
        0.01179898,  0.01250057,  0.0132439 ,  0.01403143,  0.01486579,
        0.01574972,  0.01668626,  0.0176785 ,  0.01872969,  0.01984343,
        0.02102339,  0.02227348,  0.02359796,  0.02500114,  0.0264878 ,
        0.02806285,  0.02973157,  0.03149945,  0.03337252,  0.035357  ,
        0.03745937,  0.03968686,  0.04204679,  0.04454696,  0.04719591,
        0.05000228,  0.05297559,  0.0561257 ,  0.05946314,  0.06299889,
        0.06674504,  0.070714  ,  0.07491875,  0.07937372,  0.08409357,
        0.08909392,  0.09439182,  0.10000455,  0.10595119,  0.1122514 ,
        0.11892629,  0.12599778,  0.13349009,  0.14142799,  0.14983749,
        0.15874743,  0.16818714,  0.17818785,  0.18878365,  0.20000911,
        0.21190238,  0.2245028 ,  0.23785257,  0.25199556,  0.26698017,
        0.28285599,  0.29967499,  0.31749487,  0.33637428,  0.35637569,
        0.37756729,  0.40001822,  0.42380476,  0.4490056 ,  0.47570515,
        0.50399113,  0.53396034,  0.56571198,  0.59934998,  0.63498974,
        0.67274857,  0.71275139,  0.75513458,  0.80003643,  0.84760952,
        0.89801121};

float getFreqSlideAmt(float semitones){
	semitones+=48; // table begins at -48 semitones
	uint32_t intFreqSlideAmt = (uint32_t)(semitones);
	return (semitones-intFreqSlideAmt)*(freqStepSlopeTable[intFreqSlideAmt])+freqStepTable[intFreqSlideAmt];
}
