/*
 * tables.c
 *
 *  Created on: Jul 29, 2015
 *      Author: austen
 */
#include "tables.h"
/* Q31
 * FS=192000
 */
const q31_t soundFreqTable[128] = {
				   9611,    10183,    10789,    11430,    12110,    12830,
		          13593,    14401,    15258,    16165,    17126,    18144,
		          19223,    20367,    21578,    22861,    24220,    25660,
		          27186,    28803,    30516,    32330,    34253,    36289,
		          38447,    40734,    43156,    45722,    48441,    51321,
		          54373,    57606,    61032,    64661,    68506,    72579,
		          76895,    81468,    86312,    91444,    96882,   102643,
		         108746,   115213,   122064,   129322,   137012,   145159,
		         153791,   162936,   172624,   182889,   193764,   205286,
		         217493,   230426,   244128,   258644,   274024,   290319,
		         307582,   325872,   345249,   365779,   387529,   410573,
		         434987,   460852,   488256,   517289,   548049,   580638,
		         615164,   651744,   690498,   731558,   775058,   821146,
		         869974,   921705,   976512,  1034579,  1096098,  1161276,
		        1230329,  1303488,  1380997,  1463116,  1550117,  1642292,
		        1739948,  1843410,  1953025,  2069158,  2192197,  2322552,
		        2460658,  2606976,  2761995,  2926232,  3100235,  3284584,
		        3479896,  3686821,  3906051,  4138317,  4384394,  4645104,
		        4921316,  5213953,  5523991,  5852464,  6200470,  6569169,
		        6959792,  7373643,  7812103,  8276635,  8768789,  9290208,
		        9842633, 10427906, 11047982, 11704929, 12400940, 13138339,
		       13919585, 14747287};
/* Q31
 * FS=192000
 */
const q31_t freqStepTable[128] = {
				  277,    293,    311,    329,    349,    370,    392,    415,
		          440,    466,    494,    523,    554,    587,    622,    659,
		          699,    740,    784,    831,    880,    933,    988,   1047,
		         1109,   1175,   1245,   1319,   1398,   1481,   1569,   1662,
		         1761,   1866,   1977,   2094,   2219,   2351,   2491,   2639,
		         2796,   2962,   3138,   3325,   3522,   3732,   3954,   4189,
		         4438,   4702,   4982,   5278,   5592,   5924,   6277,   6650,
		         7045,   7464,   7908,   8379,   8877,   9405,   9964,  10557,
		        11184,  11849,  12554,  13301,  14091,  14929,  15817,  16758,
		        17754,  18810,  19929,  21114,  22369,  23699,  25109,  26602,
		        28183,  29859,  31635,  33516,  35509,  37621,  39858,  42228,
		        44739,  47399,  50218,  53204,  56367,  59719,  63270,  67033,
		        71019,  75242,  79716,  84456,  89478,  94799, 100436, 106408,
		       112735, 119439, 126541, 134066, 142038, 150484, 159432, 168912,
		       178956, 189598, 200872, 212816, 225471, 238878, 253083, 268132,
		       284076, 300968, 318865, 337825, 357913, 379196, 401744, 425633};

/*
 * Filter f_c table
 */
const q31_t cutoffTable[256] = {
		3294197,   3366330,   3440043,   3515370,   3592347,   3671009,
		         3751394,   3833538,   3917482,   4003263,   4090923,   4180503,
		         4272044,   4365589,   4461183,   4558870,   4658696,   4760708,
		         4864954,   4971482,   5080344,   5191588,   5305269,   5421439,
		         5540153,   5661466,   5785436,   5912120,   6041579,   6173872,
		         6309061,   6447211,   6588386,   6732653,   6880078,   7030732,
		         7184684,   7342008,   7502776,   7667065,   7834951,   8006513,
		         8181832,   8360990,   8544071,   8731161,   8922347,   9117720,
		         9317371,   9521394,   9729884,   9942939,  10160659,  10383147,
		        10610507,  10842844,  11080270,  11322894,  11570831,  11824196,
		        12083110,  12347692,  12618069,  12894365,  13176711,  13465240,
		        13760087,  14061389,  14369289,  14683930,  15005461,  15334033,
		        15669798,  16012916,  16363546,  16721854,  17088008,  17462178,
		        17844541,  18235277,  18634567,  19042601,  19459568,  19885665,
		        20321092,  20766052,  21220754,  21685413,  22160245,  22645473,
		        23141326,  23648034,  24165837,  24694977,  25235702,  25788266,
		        26352927,  26929951,  27519609,  28122175,  28737935,  29367175,
		        30010191,  30667284,  31338763,  32024942,  32726143,  33442695,
		        34174934,  34923202,  35687851,  36469239,  37267732,  38083704,
		        38917539,  39769625,  40640364,  41530162,  42439437,  43368615,
		        44318131,  45288429,  46279964,  47293202,  48328615,  49386689,
		        50467920,  51572813,  52701886,  53855668,  55034698,  56239529,
		        57470723,  58728857,  60014521,  61328314,  62670852,  64042762,
		        65444687,  66877280,  68341213,  69837168,  71365846,  72927960,
		        74524240,  76155431,  77822295,  79525611,  81266172,  83044791,
		        84862299,  86719541,  88617385,  90556714,  92538433,  94563464,
		        96632751,  98747256, 100907963, 103115878, 105372028, 107677460,
		       110033246, 112440480, 114900279, 117413784, 119982161, 122606601,
		       125288318, 128028555, 130828579, 133689685, 136613195, 139600459,
		       142652855, 145771791, 148958703, 152215060, 155542357, 158942126,
		       162415925, 165965350, 169592025, 173297611, 177083803, 180952329,
		       184904953, 188943477, 193069737, 197285609, 201593003, 205993872,
		       210490206, 215084033, 219777426, 224572494, 229471392, 234476313,
		       239589497, 244813224, 250149820, 255601654, 261171142, 266860744,
		       272672966, 278610364, 284675535, 290871129, 297199842, 303664418,
		       310267649, 317012378, 323901496, 330937944, 338124711, 345464837,
		       352961413, 360617577, 368436520, 376421478, 384575740, 392902643,
		       401405570, 410087955, 418953276, 428005060, 437246877, 446682342,
		       456315113, 466148890, 476187409, 486434449, 496893820, 507569369,
		       518464972, 529584533, 540931981, 552511266, 564326357, 576381234,
		       588679888, 601226314, 614024503, 627078442, 640392102, 653969435,
		       667814365, 681930778, 696322518, 710993374, 725947069, 741187254,
		       756717490, 772541240, 788661853, 805082551};

const q15_t TriTable[256] = {
			   -32768, -32256, -31744, -31232, -30720, -30208, -29696, -29184,
		       -28672, -28160, -27648, -27136, -26624, -26112, -25600, -25088,
		       -24576, -24064, -23552, -23040, -22528, -22016, -21504, -20992,
		       -20480, -19968, -19456, -18944, -18432, -17920, -17408, -16896,
		       -16384, -15872, -15360, -14848, -14336, -13824, -13312, -12800,
		       -12288, -11776, -11264, -10752, -10240,  -9728,  -9216,  -8704,
		        -8192,  -7680,  -7168,  -6656,  -6144,  -5632,  -5120,  -4608,
		        -4096,  -3584,  -3072,  -2560,  -2048,  -1536,  -1024,   -512,
		            0,    512,   1024,   1536,   2048,   2560,   3072,   3584,
		         4096,   4608,   5120,   5632,   6144,   6656,   7168,   7680,
		         8192,   8704,   9216,   9728,  10240,  10752,  11264,  11776,
		        12288,  12800,  13312,  13824,  14336,  14848,  15360,  15872,
		        16384,  16896,  17408,  17920,  18432,  18944,  19456,  19968,
		        20480,  20992,  21504,  22016,  22528,  23040,  23552,  24064,
		        24576,  25088,  25600,  26112,  26624,  27136,  27648,  28160,
		        28672,  29184,  29696,  30208,  30720,  31232,  31744,  32256,
		        32256,  31744,  31232,  30720,  30208,  29696,  29184,  28672,
		        28160,  27648,  27136,  26624,  26112,  25600,  25088,  24576,
		        24064,  23552,  23040,  22528,  22016,  21504,  20992,  20480,
		        19968,  19456,  18944,  18432,  17920,  17408,  16896,  16384,
		        15872,  15360,  14848,  14336,  13824,  13312,  12800,  12288,
		        11776,  11264,  10752,  10240,   9728,   9216,   8704,   8192,
		         7680,   7168,   6656,   6144,   5632,   5120,   4608,   4096,
		         3584,   3072,   2560,   2048,   1536,   1024,    512,      0,
		         -512,  -1024,  -1536,  -2048,  -2560,  -3072,  -3584,  -4096,
		        -4608,  -5120,  -5632,  -6144,  -6656,  -7168,  -7680,  -8192,
		        -8704,  -9216,  -9728, -10240, -10752, -11264, -11776, -12288,
		       -12800, -13312, -13824, -14336, -14848, -15360, -15872, -16384,
		       -16896, -17408, -17920, -18432, -18944, -19456, -19968, -20480,
		       -20992, -21504, -22016, -22528, -23040, -23552, -24064, -24576,
		       -25088, -25600, -26112, -26624, -27136, -27648, -28160, -28672,
		       -29184, -29696, -30208, -30720, -31232, -31744, -32256, -32768};

const q15_t SawTable[256] = {
		   -32768, -32512, -32256, -32000, -31744, -31488, -31232, -30976,
	       -30720, -30464, -30208, -29952, -29696, -29440, -29184, -28928,
	       -28672, -28416, -28160, -27904, -27648, -27392, -27136, -26880,
	       -26624, -26368, -26112, -25856, -25600, -25344, -25088, -24832,
	       -24576, -24320, -24064, -23808, -23552, -23296, -23040, -22784,
	       -22528, -22272, -22016, -21760, -21504, -21248, -20992, -20736,
	       -20480, -20224, -19968, -19712, -19456, -19200, -18944, -18688,
	       -18432, -18176, -17920, -17664, -17408, -17152, -16896, -16640,
	       -16384, -16128, -15872, -15616, -15360, -15104, -14848, -14592,
	       -14336, -14080, -13824, -13568, -13312, -13056, -12800, -12544,
	       -12288, -12032, -11776, -11520, -11264, -11008, -10752, -10496,
	       -10240,  -9984,  -9728,  -9472,  -9216,  -8960,  -8704,  -8448,
	        -8192,  -7936,  -7680,  -7424,  -7168,  -6912,  -6656,  -6400,
	        -6144,  -5888,  -5632,  -5376,  -5120,  -4864,  -4608,  -4352,
	        -4096,  -3840,  -3584,  -3328,  -3072,  -2816,  -2560,  -2304,
	        -2048,  -1792,  -1536,  -1280,  -1024,   -768,   -512,   -256,
	            0,    256,    512,    768,   1024,   1280,   1536,   1792,
	         2048,   2304,   2560,   2816,   3072,   3328,   3584,   3840,
	         4096,   4352,   4608,   4864,   5120,   5376,   5632,   5888,
	         6144,   6400,   6656,   6912,   7168,   7424,   7680,   7936,
	         8192,   8448,   8704,   8960,   9216,   9472,   9728,   9984,
	        10240,  10496,  10752,  11008,  11264,  11520,  11776,  12032,
	        12288,  12544,  12800,  13056,  13312,  13568,  13824,  14080,
	        14336,  14592,  14848,  15104,  15360,  15616,  15872,  16128,
	        16384,  16640,  16896,  17152,  17408,  17664,  17920,  18176,
	        18432,  18688,  18944,  19200,  19456,  19712,  19968,  20224,
	        20480,  20736,  20992,  21248,  21504,  21760,  22016,  22272,
	        22528,  22784,  23040,  23296,  23552,  23808,  24064,  24320,
	        24576,  24832,  25088,  25344,  25600,  25856,  26112,  26368,
	        26624,  26880,  27136,  27392,  27648,  27904,  28160,  28416,
	        28672,  28928,  29184,  29440,  29696,  29952,  30208,  30464,
	        30720,  30976,  31232,  31488,  31744,  32000,  32256,  32512};

q31_t getNoteFreq(q31_t semitones){
	return arm_linear_interp_q31(&soundFreqTable[0],semitones+0x04000000,128);
}
q31_t getFreqSlideAmt(q31_t semitones){
	return arm_linear_interp_q31(&freqStepTable[0],semitones+0x04000000,128);
}
q31_t getLFOFreq(q31_t semitones){
	return arm_linear_interp_q31(&soundFreqTable[0],semitones,128);
}
q31_t getFilterFreq(q31_t cutoff_freq){
	return cutoffTable[cutoff_freq>>23];
}
